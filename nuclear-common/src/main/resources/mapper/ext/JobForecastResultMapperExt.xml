<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aimsphm.nuclear.common.mapper.JobForecastResultMapper">
    <!-- 扩展查询映射结果 -->
    <resultMap id="BaseResultMapExt" type="com.aimsphm.nuclear.common.entity.JobForecastResultDO"
               extends="com.aimsphm.nuclear.common.entity.JobForecastResultDO.BaseResultMap">
    </resultMap>

    <select id="listCommonComponentByDeviceId" resultType="com.aimsphm.nuclear.common.entity.CommonComponentDO">
        SELECT
        c.*
        FROM
        `common_component` c
        WHERE
        device_id = #{deviceId}
        AND EXISTS ( SELECT component_id FROM algorithm_prognostic_fault_feature WHERE component_id = c.id AND deleted =
        0 )
        AND deleted = 0 order by c.id
    </select>
</mapper>