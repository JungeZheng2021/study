<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aimsphm.nuclear.data.mapper.MeasurePointVOMapper">
    <resultMap id="BaseResultMap" type="com.aimsphm.nuclear.common.entity.vo.MeasurePointVO">
        <result column="tag_id" property="tag"/>
        <result column="device_id" property="parentTag"/>
        <result column="sub_system_id" property="subSystemId"/>
        <result column="unit" property="unit"/>
        <result column="device_Name" property="parentTagName"/>
        <result column="sensor_name" property="tagName"/>
        <result column="sensor_des_code" property="locationCode"/>
        <result column="sensor_desc" property="sensorDesc"/>
        <result column="sensor_des" property="sensorDes"/>
        <result column="sensor_type" property="sensorType"/>
        <result column="early_warning_hi" property="alarmThresholdHigh"/>
        <result column="early_warning_lo" property="alarmThresholdLow"/>
        <result column="thr_hi" property="thresholdHigh"/>
        <result column="thr_hihi" property="thresholdHighHigh"/>
        <result column="thr_lo" property="thresholdLow"/>
        <result column="thr_lolo" property="thresholdLowLow"/>
        <result column="pi_sensor" property="piSensor"/>
        <result column="feature_type" property="featureType"/>
        <result column="iswifi" property="iswifi"/>
        <result column="alias" property="alias" />
    </resultMap>
    <sql id="Base_Column_List">
        s.tag_id,
            s.sensor_name,
            s.device_id,
            s.sub_system_id,
            s.sensor_des_code,
            s.sensor_desc,
            s.sensor_des,
            d.device_name,
            s.sensor_type,
            s.unit,
            s.early_warning_hi,
            s.early_warning_lo,
            s.thr_hi,
            s.thr_hihi,
            s.thr_lo,
            s.thr_lolo,
            s.related_group,
            s.pi_sensor,
            s.feature_type,
            s.iswifi,
            s.alias
    </sql>
    <!--查询所有的Pi测点数据-->
    <select id="selectMeasurePoints" resultMap="BaseResultMap" parameterType="integer">
        SELECT
        <include refid="Base_Column_List"/>
        FROM
        `md_sensor` s
        LEFT JOIN md_device d ON s.device_id = d.id
        WHERE
        pi_sensor = #{category,jdbcType=INTEGER}
    </select>
    <!--根据tagId查询所有的Pi测点数据-->
    <select id="selectMeasurePointsByTagId" resultMap="BaseResultMap">
        SELECT
        <include refid="Base_Column_List"/>
        FROM
        `md_sensor` s
        LEFT JOIN md_device d ON s.device_id = d.id
        WHERE
        pi_sensor = #{category,jdbcType=INTEGER}
        AND s.tag_id= #{tagId}
    </select>

</mapper>
